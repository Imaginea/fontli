TODO List for next deployment:
------------------------------

Pre deploy:
-----------

1). Setup admin login credentials:

cd /data/www/typestry/shared/config
vim admin_creds.yml

admin: password

Share the password to the admin, in person.

Post deploy:
------------

1). Enable the new fields in users document:

RAILS_ENV=production rails c
User.unscoped.count
User.unscoped.all.to_a.each { |u| u.active = true; u.user_flags_count = 0; u.save; }
User.count
exit

Result: User.unscoped.count should be equal to User.count

2). Update users profile pic path to include filenames

usrs = User.where(:avatar_filename.ne => nil).to_a
usrs.each { |u| fname = u.avatar_filename.gsub(File.extname(u.avatar_filename), ''); src_fname = u.path.gsub("#{fname}_", ''); next unless File.exist?(src_fname); File.rename(src_fname, u.path) }

Test a few samples

3). Enable the new fields in fonts document:

RAILS_ENV=production rails c
Font.all.to_a.each {|f| f.update_attribute(:updated_at, f.created_at) }
Font.where(:updated_at => nil).count

Result: should be zero.
